<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mandarine</title>

    <!-- 폰트, 아이콘, 스타일시트 -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://ai-public.creatie.ai/gen_page/tailwind-custom.css" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com/3.4.5?plugins=forms@0.5.7,typography@0.5.13,aspect-ratio@0.4.2,container-queries@0.1.1"></script>
    <script src="https://ai-public.creatie.ai/gen_page/tailwind-config.min.js" data-color="#000000" data-border-radius="small"></script>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Bootstrap JS 및 의존성 -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>

    <!-- 스크롤 헤더 관련 스타일 -->
    <style>
        .header-wrapper {
            position: relative;
            z-index: 1;
        }
        
        header {
            transition: transform 0.3s ease;
            background: white;
        }
        
        .header-wrapper.hide header {
            transform: translateY(-100%);
        }

        .nav-wrapper {
            position: relative;
            z-index: 2;
            background: white; /* 배경색 명시적 지정 */
        }

        .nav-wrapper.fixed {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: white; /* 배경색 명시적 지정 */
        }

        /* 네비게이션 바 내부 요소들의 z-index 및 position 설정 */
        .nav-wrapper nav {
            position: relative;
            z-index: 1000;
        }

        /* 드롭다운 메뉴 z-index 조정 */
        .nav-wrapper .group:hover .group-hover\:block {
            z-index: 1001;
        }

        /* 드롭다운 메뉴 컨테이너 */
        .nav-wrapper .relative.group {
            position: relative;
            z-index: 1001;
        }

        /* 드롭다운 메뉴 아이템 */
        .nav-wrapper .absolute {
            z-index: 1001;
        }

        /* 메인 캐러셀의 z-index 조정 */
        #mainCarousel {
            position: relative;
            z-index: 1;
        }

        /* 최근 본 상품 사이드바 z-index 조정 */
        .fixed.right-0 {
            z-index: 999;
        }

        /* 카테고리 메뉴 기본 스타일 */
        #categoryMenu,
        #subCategoryMenu,
        .category-content,
        .group-hover\:block {
            background-color: white;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        /* 숨김 상태 */
        #categoryMenu.hidden,
        #subCategoryMenu.hidden,
        .category-content.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }
    </style>
</head>
<body class="font-['Noto_Sans_KR'] bg-gray-50">
    <!-- 헤더 랩퍼 추가 -->
    <div class="header-wrapper">
        <!-- 헤더 영역 시작 -->
        <header class="bg-white border-b">
            <div class="max-w-8xl mx-auto">
                <div class="flex justify-between items-center px-4 py-3">
                    <!-- 로고 -->
                    <div class="flex-shrink-0">
                        <a href="/">
                            <img src="static/img/logo.png" alt="만다린" class="h-8">
                        </a>
                    </div>

                    <!-- 검색창과 유틸리티 메뉴를 감싸는 컨테이너 -->
                    <div class="flex flex-grow items-center justify-center space-x-8">
                        <!-- 검색창 -->
                        <div class="flex-grow max-w-xl">
                            <div class="relative">
                                <input type="text" 
                                       placeholder="검색어를 입력해 주세요" 
                                       class="w-full pl-4 pr-10 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-custom">
                                <button class="absolute right-0 top-0 mt-2 mr-3 text-gray-400 hover:text-custom">
                                    <i class="fas fa-search"></i>
                                </button>
                            </div>
                        </div>

                        <!-- 유틸리티 메뉴 -->
                        <div class="flex items-center space-x-2">
                            <a href="#" class="text-sm text-gray-600 hover:text-custom">로그인</a>
                            <span class="text-gray-300">|</span>
                            <a href="#" class="text-sm text-gray-600 hover:text-custom">회원가입</a>
                            <span class="text-gray-300">|</span>
                            <a href="#" class="text-sm text-gray-600 hover:text-custom">주문조회</a>
                            <span class="text-gray-300">|</span>
                            <a href="#" class="text-sm text-gray-600 hover:text-custom">고객센터</a>
                        </div>
                    </div>
                </div>
            </div>
        </header>
    </div>

    <!-- 네비게이션 랩퍼를 헤더 랩퍼 밖으로 이동 -->
    <div class="nav-wrapper">
        <!-- 네비게이션 영역 시작 -->
        <nav class="bg-white shadow-sm">
            <div class="max-w-8xl mx-auto px-4">
                <div class="flex justify-center">
                    <!-- 전체 메뉴 드롭다운 -->
                    <div class="relative group">
                        <button class="flex items-center px-4 py-4 text-custom font-medium" onclick="toggleCategories(event)">
                            <i class="fas fa-bars mr-2"></i>
                            전체 메뉴
                        </button>
                        <!-- 1차 메뉴 -->
                        <div id="categoryMenu" class="absolute left-0 top-full w-[200px] bg-white shadow-lg hidden">
                            <ul class="py-2">
                                <li class="category-item" data-category="menu1">
                                    <a href="#" class="flex items-center justify-between px-4 py-2 hover:bg-gray-50">
                                        <span>메인메뉴 1</span>
                                        <i class="fas fa-chevron-right text-xs text-gray-400"></i>
                                    </a>
                                </li>
                                <li class="category-item" data-category="menu2">
                                    <a href="#" class="flex items-center justify-between px-4 py-2 hover:bg-gray-50">
                                        <span>메인메뉴 2</span>
                                        <i class="fas fa-chevron-right text-xs text-gray-400"></i>
                                    </a>
                                </li>
                                <li class="category-item" data-category="menu3">
                                    <a href="#" class="flex items-center justify-between px-4 py-2 hover:bg-gray-50">
                                        <span>메인메뉴 3</span>
                                        <i class="fas fa-chevron-right text-xs text-gray-400"></i>
                                    </a>
                                </li>
                                <li class="category-item" data-category="menu4">
                                    <a href="#" class="flex items-center justify-between px-4 py-2 hover:bg-gray-50">
                                        <span>메인메뉴 4</span>
                                        <i class="fas fa-chevron-right text-xs text-gray-400"></i>
                                    </a>
                                </li>
                                <li class="category-item" data-category="menu5">
                                    <a href="#" class="flex items-center justify-between px-4 py-2 hover:bg-gray-50">
                                        <span>메인메뉴 5</span>
                                        <i class="fas fa-chevron-right text-xs text-gray-400"></i>
                                    </a>
                                </li>
                                <li class="category-item" data-category="menu6">
                                    <a href="#" class="flex items-center justify-between px-4 py-2 hover:bg-gray-50">
                                        <span>메인메뉴 6</span>
                                        <i class="fas fa-chevron-right text-xs text-gray-400"></i>
                                    </a>
                                </li>
                                <li class="category-item" data-category="menu7">
                                    <a href="#" class="flex items-center justify-between px-4 py-2 hover:bg-gray-50">
                                        <span>메인메뉴 7</span>
                                        <i class="fas fa-chevron-right text-xs text-gray-400"></i>
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <!-- 2차 메뉴 (카테고리 상세) -->
                        <div id="subCategoryMenu" class="absolute left-[200px] top-full w-[800px] bg-white shadow-lg hidden">
                            <!-- 메인메뉴 1 카테고리 -->
                            <div class="category-content bg-white p-6 hidden" data-category="menu1">
                                <div class="grid grid-cols-4 p-6 gap-6">
                                    <div>
                                        <h3 class="font-medium mb-3 text-custom">카테고리 1-1</h3>
                                        <ul class="space-y-2">
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 1-1</a></li>
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 1-2</a></li>
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 1-3</a></li>
                                        </ul>
                                    </div>
                                    <div>
                                        <h3 class="font-medium mb-3 text-custom">카테고리 1-2</h3>
                                        <ul class="space-y-2">
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 1-4</a></li>
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 1-5</a></li>
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 1-6</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <!-- 메인메뉴 2 카테고리 -->
                            <div class="category-content bg-white p-6 hidden" data-category="menu2">
                                <div class="grid grid-cols-4 p-6 gap-6">
                                    <div>
                                        <h3 class="font-medium mb-3 text-custom">카테고리 2-1</h3>
                                        <ul class="space-y-2">
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 2-1</a></li>
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 2-2</a></li>
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 2-3</a></li>
                                        </ul>
                                    </div>
                                    <div>
                                        <h3 class="font-medium mb-3 text-custom">카테고리 2-2</h3>
                                        <ul class="space-y-2">
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 2-4</a></li>
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 2-5</a></li>
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 2-6</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <!-- 메인메뉴 3 카테고리 -->
                            <div class="category-content bg-white p-6 hidden" data-category="menu3">
                                <div class="grid grid-cols-4 p-6 gap-6">
                                    <div>
                                        <h3 class="font-medium mb-3 text-custom">카테고리 3-1</h3>
                                        <ul class="space-y-2">
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 3-1</a></li>
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 3-2</a></li>
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 3-3</a></li>
                                        </ul>
                                    </div>
                                    <div>
                                        <h3 class="font-medium mb-3 text-custom">카테고리 3-2</h3>
                                        <ul class="space-y-2">
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 3-4</a></li>
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 3-5</a></li>
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 3-6</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <!-- 메인메뉴 4 카테고리 -->
                            <div class="category-content bg-white p-6 hidden" data-category="menu4">
                                <div class="grid grid-cols-4 p-6 gap-6">
                                    <div>
                                        <h3 class="font-medium mb-3 text-custom">카테고리 4-1</h3>
                                        <ul class="space-y-2">
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 4-1</a></li>
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 4-2</a></li>
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 4-3</a></li>
                                        </ul>
                                    </div>
                                    <div>
                                        <h3 class="font-medium mb-3 text-custom">카테고리 4-2</h3>
                                        <ul class="space-y-2">
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 4-4</a></li>
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 4-5</a></li>
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 4-6</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <!-- 메인메뉴 5 카테고리 -->
                            <div class="category-content bg-white p-6 hidden" data-category="menu5">
                                <div class="grid grid-cols-4 p-6 gap-6">
                                    <div>
                                        <h3 class="font-medium mb-3 text-custom">카테고리 5-1</h3>
                                        <ul class="space-y-2">
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 5-1</a></li>
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 5-2</a></li>
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 5-3</a></li>
                                        </ul>
                                    </div>
                                    <div>
                                        <h3 class="font-medium mb-3 text-custom">카테고리 5-2</h3>
                                        <ul class="space-y-2">
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 5-4</a></li>
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 5-5</a></li>
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 5-6</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <!-- 메인메뉴 6 카테고리 -->
                            <div class="category-content bg-white p-6 hidden" data-category="menu6">
                                <div class="grid grid-cols-4 p-6 gap-6">
                                    <div>
                                        <h3 class="font-medium mb-3 text-custom">카테고리 6-1</h3>
                                        <ul class="space-y-2">  
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 6-1</a></li>
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 6-2</a></li>
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 6-3</a></li>
                                        </ul>
                                    </div>
                                    <div>
                                        <h3 class="font-medium mb-3 text-custom">카테고리 6-2</h3>
                                        <ul class="space-y-2">
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 6-4</a></li>
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 6-5</a></li>
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 6-6</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <!-- 메인메뉴 7 카테고리 -->
                            <div class="category-content bg-white p-6 hidden" data-category="menu7">
                                <div class="grid grid-cols-4 p-6 gap-6">
                                    <div>
                                        <h3 class="font-medium mb-3 text-custom">카테고리 7-1</h3>
                                        <ul class="space-y-2">
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 7-1</a></li>
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 7-2</a></li>
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 7-3</a></li>
                                        </ul>
                                    </div>
                                    <div>
                                        <h3 class="font-medium mb-3 text-custom">카테고리 7-2</h3>
                                        <ul class="space-y-2">
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 7-4</a></li>
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 7-5</a></li>
                                            <li><a href="#" class="text-gray-600 hover:text-custom">서브메뉴 7-6</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
    </div>

    <main-content-component></main-content-component>
    <footer-component></footer-component>

    <!-- 스크롤 헤더 관련 스크립트 -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const headerWrapper = document.querySelector('.header-wrapper');
            const navWrapper = document.querySelector('.nav-wrapper');
            let lastScrollTop = 0;
            let headerHeight = headerWrapper.querySelector('header').offsetHeight;
            let ticking = false;

            window.addEventListener('scroll', function() {
                if (!ticking) {
                    window.requestAnimationFrame(function() {
                        let currentScroll = window.pageYOffset || document.documentElement.scrollTop;
                        
                        // 스크롤이 헤더 높이를 넘어섰을 때
                        if (currentScroll > headerHeight) {
                            headerWrapper.classList.add('hide');
                            navWrapper.classList.add('fixed');
                        } else {
                            headerWrapper.classList.remove('hide');
                            navWrapper.classList.remove('fixed');
                        }

                        lastScrollTop = currentScroll;
                        ticking = false;
                    });

                    ticking = true;
                }
            });
        });
    </script>

    <!-- 카테고리 메뉴 스크립트 -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const categoryItems = document.querySelectorAll('.category-item');
            const categoryMenu = document.getElementById('categoryMenu');
            const subMenu = document.getElementById('subCategoryMenu');
            const contents = document.querySelectorAll('.category-content');
            const menuContainer = document.querySelector('.relative.group');

            let isMenuOpen = false;

            // 메뉴 높이 동적 조정
            function adjustMenuHeight() {
                // 높이를 초기화한 후 다시 설정
                categoryMenu.style.height = 'auto';
                subMenu.style.height = 'auto';

                const maxHeight = Math.max(categoryMenu.scrollHeight, subMenu.scrollHeight);
                categoryMenu.style.height = `${maxHeight}px`;
                subMenu.style.height = `${maxHeight}px`;
            }

            // 전체 메뉴 토글 시 높이 조정
            window.toggleCategories = function(event) {
                event.preventDefault();
                event.stopPropagation();
                
                isMenuOpen = !isMenuOpen;
                if (isMenuOpen) {
                    categoryMenu.classList.remove('hidden');
                    adjustMenuHeight(); // 높이 조정 함수 호출
                } else {
                    categoryMenu.classList.add('hidden');
                    subMenu.classList.add('hidden');
                    contents.forEach(content => content.classList.add('hidden'));
                }
            };

            // 카테고리 아이템 호버 이벤트
            categoryItems.forEach(item => {
                item.addEventListener('mouseenter', function() {
                    const category = this.dataset.category;
                    
                    // 서브메뉴 표시
                    subMenu.classList.remove('hidden');
                    adjustMenuHeight(); // 높이 조정 함수 호출
                    
                    // 해당 카테고리 컨텐츠만 표시
                    contents.forEach(content => {
                        if (content.dataset.category === category) {
                            content.classList.remove('hidden');
                        } else {
                            content.classList.add('hidden');
                        }
                    });
                });
            });

            // 서브메뉴에 마우스 진입 시
            subMenu.addEventListener('mouseenter', function() {
                categoryMenu.classList.remove('hidden');
            });

            // 메뉴 영역 마우스 이탈 시
            menuContainer.addEventListener('mouseleave', function(e) {
                // 서브메뉴로 이동하는 경우는 무시
                if (e.relatedTarget && (subMenu.contains(e.relatedTarget) || e.relatedTarget === subMenu)) {
                    return;
                }
                
                // 드롭다운 메뉴는 유지하고 카테고리 메뉴만 숨김
                subMenu.classList.add('hidden');
                contents.forEach(content => content.classList.add('hidden'));
            });

            // 외부 클릭 시 모든 메뉴 닫기
            document.addEventListener('click', function(e) {
                if (!menuContainer.contains(e.target) && !subMenu.contains(e.target)) {
                    categoryMenu.classList.add('hidden');
                    subMenu.classList.add('hidden');
                    contents.forEach(content => content.classList.add('hidden'));
                    isMenuOpen = false;
                }
            });
        });
    </script>
</body>
</html>